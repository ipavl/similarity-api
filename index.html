<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Similarity API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;,&quot;php&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="tocify-wrapper">
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
              <a href="#" data-language-name="php">php</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='./scaladoc/ca/ianp/similarity/index.html'>View Scaladoc</a></li>
            <li><a href="https://github.com/ipavl/similarity-api">View Repository</a></li>
            <li><a href='https://github.com/tripit/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="introduction">Introduction</h1>

<p>Similarity API is a RESTful interface to services designed to compare sets of source code for similarity, as often used for detecting software plagiarism in education. It is intended to run alongside some form of learning management system (LMS) or submission portal as a helper service, although it is also possible to interact with it directly.</p>

<p>You can view code examples in the dark area to the right, and you can switch the programming language of the examples with the tabs in the top right.</p>

<h1 id="submissions">Submissions</h1>

<p>It is expected that the sets of source code to check will already be on the server where the API resides, extracted, and structured in such a way that each set (e.g. each student&rsquo;s assignment) is within its own directory under a common parent. The current implementation assumes that each student&rsquo;s submission is its own Git repo, of which the current commit on the <code class="prettyprint">master</code> branch is used as the submission version.</p>

<p>In this example, all student assignments are under a top-level &ldquo;submissions&rdquo; directory, with a course-assignment-student hierarchy beneath.</p>

<p><strong>Note:</strong> Submission names cannot currently contain hyphens due to the way that results are parsed.</p>

<pre>
submissions
├───CS110_W17
│   ├───A1
│   │   ├───asmithee
│   │   ├───jdoe05
│   │   ├───jsmith12
│   │   └───rroe
│   └───A2
├───CS120_W17
│   └───A1
│       └───jshmoe
└───CS230_W17
</pre>

<h2 id="trigger-similarity-check">Trigger Similarity Check</h2>
<pre class="highlight shell tab-shell"><code>curl http://localhost:4910/check <span class="se">\</span>
  -X POST <span class="se">\</span>
  -d <span class="s1">'{"assignmentId": "33",
       "threshold": 20,
       "studentId": "jdoe05",
       "directory": "submissions/CS110_W17/A1",
       "language": "c"}'</span> <span class="se">\</span>
  --header <span class="s2">"Content-Type:application/json"</span>
</code></pre><pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="nv">$client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GuzzleHttp\Client</span><span class="p">([</span><span class="s1">'base_uri'</span> <span class="o">=&gt;</span> <span class="s1">'http://localhost:4910/'</span><span class="p">]);</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="na">post</span><span class="p">(</span><span class="s1">'check'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'json'</span> <span class="o">=&gt;</span>
  <span class="p">[</span>
    <span class="s1">'assignmentId'</span> <span class="o">=&gt;</span> <span class="s1">'33'</span><span class="p">,</span>
    <span class="s1">'threshold'</span> <span class="o">=&gt;</span> <span class="mi">20</span><span class="p">,</span>
    <span class="s1">'studentId'</span> <span class="o">=&gt;</span> <span class="s1">'jdoe05'</span><span class="p">,</span>
    <span class="s1">'directory'</span> <span class="o">=&gt;</span> <span class="s1">'submissions/CS110_W17/A1'</span><span class="p">,</span>
    <span class="s1">'language'</span> <span class="o">=&gt;</span> <span class="s1">'c'</span><span class="p">,</span>
  <span class="p">]</span>
<span class="p">]);</span>
</code></pre>
<p>This endpoint signals the similarity checker to run a check using the given settings.</p>

<aside class="notice">Similarity checks are asynchronous and results may not be immediately available upon this request completing depending on the quantity and size of submissions.</aside>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST http://localhost:4910/check</code></p>

<h3 id="request-body">Request Body</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>assignmentId</td>
<td>String</td>
<td>A shared unique identifier for all submissions for this assignment, such as the internal assignment ID from the LMS.</td>
</tr>
<tr>
<td>threshold</td>
<td>Double</td>
<td>The minimum % similarity to store results for. The highest result will always be stored regardless of this value.</td>
</tr>
<tr>
<td>studentId</td>
<td>String</td>
<td>The name of the submission to store results for.</td>
</tr>
<tr>
<td>directory</td>
<td>String</td>
<td>The directory on the server to check.</td>
</tr>
<tr>
<td>language</td>
<td>String</td>
<td>An identifier for the source code&rsquo;s language. See <a href="#language-identifiers">Language Identifiers</a> for details.</td>
</tr>
</tbody></table>

<h3 id="response-code">Response Code</h3>

<p><code class="prettyprint">202 Accepted</code></p>

<h3 id="response-body">Response Body</h3>

<p>The response body will contain the path to the future resource:</p>

<p><code class="prettyprint">/assignments/33/students/jdoe05</code></p>

<h2 id="retrieve-results-for-student">Retrieve Results for Student</h2>
<pre class="highlight shell tab-shell"><code>curl http://localhost:4910/assignments/33/students/jdoe05
</code></pre><pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="nv">$client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GuzzleHttp\Client</span><span class="p">([</span><span class="s1">'base_uri'</span> <span class="o">=&gt;</span> <span class="s1">'http://localhost:4910/'</span><span class="p">]);</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'assignments/33/students/jdoe05'</span><span class="p">);</span>

<span class="k">echo</span> <span class="nv">$response</span><span class="o">-&gt;</span><span class="na">getBody</span><span class="p">();</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1490761513</span><span class="p">,</span><span class="w">
    </span><span class="s2">"assignmentId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"33"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"jPlagResult"</span><span class="p">:</span><span class="w"> </span><span class="mf">48.333332</span><span class="p">,</span><span class="w">
    </span><span class="s2">"studentB"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jsmith12"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"studentA"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jdoe05"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"studentBVersion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b14674def29c3d4b7be24751ea36caf8b540f6d7"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"studentAVersion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e8421986310b74a5a486963d2b842188e0aec13b"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1490761513</span><span class="p">,</span><span class="w">
    </span><span class="s2">"assignmentId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"33"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"jPlagResult"</span><span class="p">:</span><span class="w"> </span><span class="mf">25.925926</span><span class="p">,</span><span class="w">
    </span><span class="s2">"studentB"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rroe"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"studentA"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jdoe05"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="s2">"studentBVersion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"83fe7cff7b7a18749b55a08f6bffb7c1b7b53a2f"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"studentAVersion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e8421986310b74a5a486963d2b842188e0aec13b"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1490761528</span><span class="p">,</span><span class="w">
    </span><span class="s2">"assignmentId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"33"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"jPlagResult"</span><span class="p">:</span><span class="w"> </span><span class="mf">19.67213</span><span class="p">,</span><span class="w">
    </span><span class="s2">"studentB"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jdoe05"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"studentA"</span><span class="p">:</span><span class="w"> </span><span class="s2">"asmithee"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="s2">"studentBVersion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e8421986310b74a5a486963d2b842188e0aec13b"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"studentAVersion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"36e2a0d57198068423c43eb81257440f17e91a9a"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>This endpoint returns an array of results for a particular student for a given assignment.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET http://localhost:4910/assignments/&lt;assignmentId&gt;/students/&lt;studentId&gt;</code></p>

<h3 id="request-parameters">Request Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>assignmentId</td>
<td>String</td>
<td>A shared unique identifier for all submissions for this assignment, such as the internal assignment ID from the LMS.</td>
</tr>
<tr>
<td>studentId</td>
<td>String</td>
<td>The name of the submission to retrieve results for.</td>
</tr>
</tbody></table>

<h3 id="response-code">Response Code</h3>

<p><code class="prettyprint">200 OK</code></p>

<h3 id="response-body">Response Body</h3>

<p>The response body will contain the matching results as JSON.</p>

<h2 id="retrieve-results-for-all-students">Retrieve Results for All Students</h2>
<pre class="highlight shell tab-shell"><code>curl http://localhost:4910/assignments/33/students
</code></pre><pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="nv">$client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GuzzleHttp\Client</span><span class="p">([</span><span class="s1">'base_uri'</span> <span class="o">=&gt;</span> <span class="s1">'http://localhost:4910/'</span><span class="p">]);</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'assignments/33/students'</span><span class="p">);</span>

<span class="k">echo</span> <span class="nv">$response</span><span class="o">-&gt;</span><span class="na">getBody</span><span class="p">();</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1490761513</span><span class="p">,</span><span class="w">
    </span><span class="s2">"assignmentId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"33"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"jPlagResult"</span><span class="p">:</span><span class="w"> </span><span class="mf">48.333332</span><span class="p">,</span><span class="w">
    </span><span class="s2">"studentB"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jsmith12"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"studentA"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jdoe05"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"studentBVersion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b14674def29c3d4b7be24751ea36caf8b540f6d7"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"studentAVersion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e8421986310b74a5a486963d2b842188e0aec13b"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1490761513</span><span class="p">,</span><span class="w">
    </span><span class="s2">"assignmentId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"33"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"jPlagResult"</span><span class="p">:</span><span class="w"> </span><span class="mf">25.925926</span><span class="p">,</span><span class="w">
    </span><span class="s2">"studentB"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rroe"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"studentA"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jdoe05"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="s2">"studentBVersion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"83fe7cff7b7a18749b55a08f6bffb7c1b7b53a2f"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"studentAVersion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e8421986310b74a5a486963d2b842188e0aec13b"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1490761528</span><span class="p">,</span><span class="w">
    </span><span class="s2">"assignmentId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"33"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"jPlagResult"</span><span class="p">:</span><span class="w"> </span><span class="mf">19.67213</span><span class="p">,</span><span class="w">
    </span><span class="s2">"studentB"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jdoe05"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"studentA"</span><span class="p">:</span><span class="w"> </span><span class="s2">"asmithee"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="s2">"studentBVersion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e8421986310b74a5a486963d2b842188e0aec13b"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"studentAVersion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"36e2a0d57198068423c43eb81257440f17e91a9a"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>This endpoint returns an array of results for all students for a given assignment.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET http://localhost:4910/assignments/&lt;assignmentId&gt;/students</code></p>

<h3 id="request-parameters">Request Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>assignmentId</td>
<td>String</td>
<td>A shared unique identifier for all submissions for this assignment, such as the internal assignment ID from the LMS.</td>
</tr>
</tbody></table>

<h3 id="response-code">Response Code</h3>

<p><code class="prettyprint">200 OK</code></p>

<h3 id="response-body">Response Body</h3>

<p>The response body will contain the matching results as JSON.</p>

          <h1 id="providers">Providers</h1>

<p>The following similarity checking services are currently supported by Similarity API:</p>

<ul>
<li><a href="https://jplag.ipd.kit.edu/">JPlag</a> (standalone)</li>
</ul>

          <h1 id="language-identifiers">Language Identifiers</h1>

<p>Some similarity checkers require the language of the source code to be specified when running a check. Since these values could vary across services, Similarity API maps a generic set of identifiers to each individual service.</p>

<p>The following are the currently used identifiers that should be used when making a request:</p>

<table><thead>
<tr>
<th>Identifier</th>
<th>Language</th>
</tr>
</thead><tbody>
<tr>
<td>c</td>
<td>C</td>
</tr>
<tr>
<td>cpp</td>
<td>C++</td>
</tr>
<tr>
<td>java</td>
<td>Java</td>
</tr>
</tbody></table>

          <h1 id="errors">Errors</h1>

<p>Currently, all errors (e.g. malformed input, missing required field) simply return a <code class="prettyprint">500</code> status code (Internal Server Error) response, but should return more appropriate status codes in the future.</p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
                <a href="#" data-language-name="php">php</a>
          </div>
      </div>
    </div>
  </body>
</html>
